{"version":3,"file":"statechart-graph.js","sources":["../lib/serialize.js","../lib/StateNode/node_definitions.js","../lib/StateNode/link_definitions.js","../lib/StateNode/StateNode.js","../lib/config.js","../lib/svg.js","../lib/legend.js","../lib/Graph.js","../lib/index.js"],"sourcesContent":["export default convertState;\n\nfunction convertState(state, level = 0) {\n  const {\n    name,\n    substates,\n    concurrent,\n    events,\n    history,\n    enters,\n    exits\n  } = state;\n\n  const convertedSubstates = substates && substates.length\n    ? substates.map(substate => convertState(substate, level + 1))\n    : null;\n\n  return {\n    name: name || \"<nameless>\",\n    level: level,\n    isActive: state.current().length > 0,\n    hasEnterHandler: !!enters.length,\n    hasExitHandler: !!exits.length,\n    concurrent: concurrent,\n    events: convertEvent(events),\n    children: convertedSubstates\n  };\n}\n\nfunction convertEvent(events) {\n  var results = [];\n  for (var k in events) {\n    results.push({name: k, func: events[k].toString()})\n  }\n  return results;\n}\n","export const defineEntranceTransition = (nodeEnter, duration, stateNode) => {\n  // Enter any new nodes at the parent's previous position.\n  nodeEnter\n    .attr(\"class\", (d) => `node ${`root${d.path}`.replace(new RegExp('\\/', 'g'), '-')}`)\n    .attr(\"transform\", () => ( \"translate(\" + stateNode.y0 + \",\" + stateNode.x0 + \")\" ))\n    // Toggle children on click.\n    .on(\"click\", (d)=> {\n      d.toggleCollapse();\n      d.render();\n    })\n    // Branchoff the current node and use it as the new root\n    .on('contextmenu', (d)=> {\n      stateNode.graph.exportPath(d.path);\n      stateNode.graph.branchoffRoot(d);\n      stateNode.graph.controlPanel.updateSubstatesPath(d.path)\n      d3.event.preventDefault();\n    })\n\n    // TODO: after the export paht is working. is this even needed\n    .on('dblclick', (d) => {\n      stateNode.graph.exportPath(d.path);\n    });\n\n  // Render the node circle\n  nodeEnter.append(\"circle\")\n    .attr(\"r\", 1e-6)\n    .style(\"fill\", function(d) {\n      return d.collapsedChildren ? \"lightsteelblue\" : \"#fff\";\n    });\n\n  // Render node name\n  const text = nodeEnter.append(\"text\")\n    .attr(\"x\", -10)\n    .attr(\"dy\", \".35em\")\n    .attr(\"text-anchor\", 'end')\n    .style('fill', d => (d.isActive ? 'white' : 'black'))\n    .text((d) => ( d.name ))\n    .style(\"fill-opacity\", '1')\n    .style(\"font-weight\", 'bolder')\n    .style(\"font-family\", 'monospace');\n\n\n  // generate bbox for the name\n  text.each(function(stateNode) {\n    stateNode.bbox = this.getBBox();\n  });\n  const PADDING = 5;\n  const BORDER = 1;\n  nodeEnter.insert('rect', 'text')\n    .attr(\"x\", (stateNode) => { return -(stateNode.name.length+1) * 6 -2*PADDING })\n    .attr(\"y\", (d) => d.bbox.y - PADDING)\n    .attr(\"width\", (stateNode) => (stateNode.name.length+1) * 6 + (PADDING*1.7) - 5*BORDER)\n    .attr(\"height\", (d) => d.bbox.height + (PADDING*2))\n    .style(\"fill\", ({isActive}) => (isActive ? '#555' : 'white' ))\n    .style(\"stroke\", \"#555\")\n    .style(\"stroke-width\", \"1px\")\n    .style(\"stroke-opacity\", \"1\")\n\n  nodeEnter.append('line')\n    .style('display', d => d.cfg.showEnterExitHandlers ? 'display': 'none')\n    .attr('class', d => d.hasEnterHandler ? 'enterHandler' : '')\n    .attr('x1', -5)\n    .attr('y1', -13)\n    .attr('x2', -10)\n    .attr('y2', -8)\n\n  nodeEnter.append('line')\n    .style('display', d => d.cfg.showEnterExitHandlers ? 'display': 'none')\n    .attr('class', d => d.hasExitHandler ? 'exitHandler' : '')\n    .attr('x1', -10)\n    .attr('y1', -13)\n    .attr('x2', -15)\n    .attr('y2', -8)\n\n  // add event description text\n  nodeEnter.selectAll(\"text\")\n    // for w/e reason this loop seem to ignore the first value.\n    .data((d) => {return [{}].concat(d.events)}).enter()\n    .append('text')\n      .attr('class', 'eventName')\n      .attr(\"text-anchor\", 'start')\n      .style(\"fill-opacity\", '1')\n      .attr(\"x\", -30)\n      .attr(\"y\", (d, i) => i * 15)\n      .attr(\"dy\", \"0.5em\")\n      .attr('display', stateNode.cfg.showEvents ? 'block' : 'none')\n      .text(function(e) { return e.name; })\n      .on('click', () => d3.event.stopPropagation())\n      .append(\"svg:title\")\n      .text(function(d) { return d.func; });\n};\n\n\nexport const defineUpdateTransition = (nodeUpdate, duration) => {\n  // Transition nodes to their new position.\n  nodeUpdate\n    .transition()\n    .duration(duration)\n    .attr(\"transform\", (d) => {\n      return \"translate(\" + d.y + \",\" + d.x + \")\";\n    });\n\n\n  // Transition for the circle color\n  nodeUpdate.select(\"circle\")\n    .attr(\"r\", 4.5)\n    .style(\"fill\", (d) => { return d.collapsedChildren && d.collapsedChildren.length ? \"lightsteelblue\" : \"#fff\"; });\n\n  // Transition for text (name & events)\n  nodeUpdate.select(\"text\")\n    // .style(\"fill-opacity\", 1);\n};\n\nexport const defineExitTransition = (nodeExit, duration, x, y) => {\n  // Transition exiting nodes to the parent's new position.\n  nodeExit\n    .duration(duration)\n    .attr(\"transform\", ()=> { return \"translate(\" + y + \",\" + x + \")\"; })\n    .remove();\n};\n","const diagonal = d3.svg.diagonal().projection(function(d) {\n  return [d.y, d.x];\n});\n\nexport const defineLinkTransitions = (link, duration, stateNode) => {\n  // Enter any new links at the parent's previous position.\n  link\n    .enter()\n    .insert(\"path\", \"g\")\n    .attr('stroke-dasharray', (d) => {return d.source.concurrent ? '5,5' : ''})\n    .attr('class', (d) => d.target && d.target.isActive ? 'link link--active' : 'link')\n    .attr(\"d\", (d)=> {\n      var o = { x: stateNode.x0, y: stateNode.y0 };\n      return diagonal({ source: o, target: o });\n    });\n\n  // Transition links to their new position.\n  link.transition()\n    .duration(duration)\n    .attr(\"d\", diagonal);\n\n  // Transition exiting nodes to the parent's new position.\n  link.exit().transition()\n    .duration(duration)\n    .attr(\"d\", (d) => {\n      var o = { x: stateNode.x, y: stateNode.y };\n      return diagonal({ source: o, target: o });\n    })\n    .remove();\n};\n","import {\n  defineEntranceTransition,\n  defineUpdateTransition,\n  defineExitTransition\n} from './node_definitions';\n\nimport {\n  defineLinkTransitions\n} from './link_definitions';\n\nlet records = [];\nclass StateNode {\n  constructor({\n    metadata,\n    metadata: {\n      name, level, isActive, concurrent,\n      events, children,\n      hasEnterHandler, hasExitHandler\n    },\n    cfg, parent, svg, graph,\n  }) {\n    records.push(this);\n    this.metadata = metadata || {};\n    this.cfg = cfg;\n    this.parent = parent;\n\n    this.svg = svg;\n    this.graph = graph;\n\n    this.name = name;\n    this.level = level;\n    this.isActive = isActive;\n    this.hasEnterHandler = hasEnterHandler;\n    this.hasExitHandler = hasExitHandler;\n    this.concurrent = concurrent;\n    this.events = events;\n\n\n    this.root = parent ? parent.root : this;\n    this.x0 = this.cfg.contentHeight / 2;\n    this.y0 = 0;\n    this.collapsedChildren = []\n    this.limboedChildren = []\n    this.children = children && children.map( child =>\n      new StateNode(Object.assign({\n        cfg,\n        parent: this,\n        svg: svg,\n        graph: graph,\n        metadata: child\n      }))\n    )\n  }\n\n  toggleCollapse() {\n    if (this.children) {\n      this.collapsedChildren = this.children;\n      this.children = null;\n    } else {\n      this.children = this.collapsedChildren;\n      this.collapsedChildren = null;\n    }\n  }\n\n  get hierarchy() {\n    if (this.isRoot) {\n      return [this.graph.rootPath || '']\n    }\n    return [...this.parent.hierarchy, this.name]\n  }\n\n  get path() {\n    return this.hierarchy.join(\"/\")\n  }\n\n  get isRoot() { return !this.parent }\n\n  get allChildren() {\n    if (!this.children || !this.children.length) return []\n    return [...this.children, ...this.children.reduce((arr, c) => [...arr, ...c.allChildren], [])]\n  }\n\n  get getParent() {\n    return this.parent || this.root\n  }\n\n  // collapase if isActive\n  tryCollapse() {\n    if(this.children) {\n      if(!this.isActive) {\n        this.toggleCollapse();\n      }\n      else {\n        this.children.map(child => child.tryCollapse());\n      }\n    }\n  }\n\n  tryExpand() {\n    if(this.isActive) {\n      if(this.collapsedChildren && this.collapsedChildren.length) {\n        this.toggleCollapse();\n        this.children && this.children.map(child => child.tryExpand());\n      }\n      else if(this.children){\n        this.children.map(child => child.tryExpand());\n      }\n    }\n  }\n\n  changeActive(activeness) {\n    var { isActive, children: childrenAreActive } = activeness;\n    if (this.isActive !== isActive) {\n      this.updateActive(isActive)\n      if(isActive) {\n        this.toggleCollapse()\n        this.tryExpand()\n      }\n    }\n    childrenAreActive && this.children && this.children.map(child => {\n      var result = childrenAreActive.find(cra => cra.name === child.name);\n      result && child.changeActive(result)\n    })\n  }\n\n  updateActive(isActive) {\n    this.isActive = isActive;\n    var node = this.svg.select(`g.node.${`root${this.path}`.replace(new RegExp('\\/', 'g'), '-')}`)\n    if (node) {\n      var text = node.select('text')[0][0]\n      var rect = node.select('rect')[0][0]\n      if(text) text.style.fill = this.isActive ? 'white' : 'black'\n      if(rect) rect.style.fill = this.isActive ? '#555' : 'white'\n    }\n  }\n\n  onClick() {\n    this.toggleCollapse();\n  }\n\n  render() {\n    // render this node and all children\n    const duration = this.cfg.animationDuration;\n    const stateNodes = this.graph.treeLayout.nodes(this.root);\n    // console.debug('rendering nodes length: ', nodes.length, nodes.map(n => n.name));\n\n    stateNodes.forEach((d) => {\n      // Normalize for fixed-depth (width).\n      d.y = d.depth * 180\n    });\n\n    // Uniquely IDs each node\n    let uniqueId = 0;\n    const svgNode = this.svg.selectAll(\"g.node\")\n      .data(stateNodes, (d)=> {\n        return d.id || (d.id = ++uniqueId)\n      });\n\n    defineEntranceTransition(\n      svgNode.enter().append(\"g\"),\n      duration,\n      this\n    );\n\n    defineUpdateTransition(svgNode, duration);\n\n    defineExitTransition(\n      svgNode.exit().transition(),\n      duration,\n      this.x,\n      this.y\n    );\n\n    const links = this.graph.treeLayout.links(stateNodes);\n    defineLinkTransitions(\n      this.svg.selectAll(\"path.link\").data(links, (d)=> (d.target.id)),\n      duration,\n      this //stateNode\n    );\n\n    // Stash the old positions for transition.\n    stateNodes.forEach((node)=> {\n      node.x0 = node.x;\n      node.y0 = node.y;\n    });\n  }\n}\n\nStateNode.find = function(name) {\n  return records.filter(r => r.name.indexOf(name) !== -1)[0]\n}\n\nexport default StateNode;\n","export const calculateConfig = (params) => {\n  const {\n    margin: { top, right, bottom, left },\n    margin, width, height\n  } = params;\n\n  return Object.assign(\n    {\n      animationDuration: 750,\n      contentWidth: width - right - left,\n      contentHeight: height - top - bottom,\n\n      showEvents: false,\n      showEnterExitHandlers: false,\n      branchOff: false,\n      castrationLevel: 0\n    },\n    params\n  );\n}\n\n// TODO: setup devtool config, might not be necessary\nconst MONITOR_CONFIG = calculateConfig({\n  margin: { top: 20, right: 120, bottom: 20, left: 120 },\n  width: 1600,\n  height: 800\n});\n\nexport default MONITOR_CONFIG;\n","import CONFIG from './config'\n\nconst svg = d3.select(\"body\").append(\"svg\")\n  .attr(\"width\", CONFIG.width)\n  .attr(\"height\", CONFIG.height)\n  .on('contextmenu', e => d3.event.preventDefault())\n  .append(\"g\")\n  .attr(\"transform\",\n    `translate(${CONFIG.margin.left}, ${CONFIG.margin.top})`\n  )\n\nsvg.cleanup = function() {\n  this.selectAll(\"g.node\").remove();\n  this.selectAll(\"path.link\").remove();\n}\n\nexport default svg","import svg from './svg'\nconst legendWrapper = svg.append('g')\n  .attr('class', 'legends')\n  .attr('transform', `translate(-10, 500)`)\n  .style('cursor', 'pointer')\n\nconst background = legendWrapper.append('rect')\n  .attr('fill', '#eee')\n  .attr('width', '180')\n  .attr('height', '300')\n  .attr('x', -100)\n  .attr('y', -50)\n  .attr('rx', 10)\n\nlegendWrapper.append('text')\n  .text('Legend')\n  .attr('font-size', '20px')\n  .attr('y', '-10')\n  .attr('x', '-50')\n\n// move some of these into css\nconst LEGEND_DATA = [\n  // nodes\n  {\n    node: 'circle',\n    attrs: {\n      'r': 4.5\n    },\n    styles: {\n      fill: 'white',\n      'stroke-width': 1,\n      stroke: 'steelblue'\n    },\n    description: 'node w/o children'\n  },\n  {\n    node: 'circle',\n    attrs: {\n      'r': 4.5\n    },\n    styles: {\n      fill: 'lightsteelblue',\n      'stroke-width': 1,\n      stroke: 'steelblue'\n    },\n    description: 'node w/ children'\n  },\n\n  // links\n  {\n    node: 'path',\n    attrs: {\n      // class: 'link', // make this node dissappear\n      d: 'M-10,0 L10,0',\n    },\n    styles: {\n      stroke: '#ccc',\n      'stroke-width': '1',\n    },\n    description: 'inactive path'\n  },\n  {\n    node: 'path',\n    attrs: {\n      d: 'M-10,0 L10,0',\n    },\n    styles: {\n      stroke: '#ccc',\n      'stroke-width': '3',\n    },\n    description: 'active path'\n  },\n  {\n    node: 'path',\n    attrs: {\n      d: 'M-10,0 L10,0',\n    },\n    styles: {\n      stroke: '#ccc',\n      'stroke-width': '3',\n      'stroke-dasharray': '4,4'\n    },\n    description: 'concurrent path'\n  },\n\n  // text\n  {\n    node: 'rect',\n    attrs: {\n      x: \"-10\",\n      y: \"-7\",\n      height: 15,\n      width: 20,\n    },\n    styles: {\n      fill: '#555',\n      stroke: '#555',\n    },\n    description: 'active state'\n  },\n  {\n    node: 'rect',\n    attrs: {\n      x: \"-10\",\n      y: \"-7\",\n      height: 15,\n      width: 20,\n    },\n    styles: {\n      fill: 'white',\n      stroke: '#555',\n    },\n    description: 'inactive state'\n  },\n  // events\n  {\n    node: 'text',\n    attrs: {\n      x: -9,\n      y: 5,\n      class: 'eventName'\n    },\n    text: 'clk',\n    description: 'event name'\n  },\n\n  //flags\n  {\n    node: 'line',\n    attrs: {\n      x1: 0,\n      y1: 5,\n      x2: 5,\n      y2: 0\n    },\n    styles: {\n      stroke: 'red',\n      'stroke-width': 3\n    },\n    description: 'has exit handler'\n  },\n  {\n    node: 'line',\n    attrs: {\n      x1: 0,\n      y1: 5,\n      x2: 5,\n      y2: 0\n    },\n    styles: {\n      stroke: 'green',\n      'stroke-width': 3\n    },\n    description: 'has enter handler'\n  },\n]\n\nconst mapObject = function(object, callback) {\n  var arr = [];\n  for (var k in object) {\n    arr.push(callback(object[k], k))\n  }\n  return arr;\n}\n\nvar legends = legendWrapper\n  .selectAll('g.legend')\n  .data(LEGEND_DATA)\n  .enter()\n    .append('g')\n    .attr('transform', (k,i) => (`translate(-70, ${i * 20 + 20})`))\n    .attr('width', '20')\n    .attr('height', '20')\n\nlegends.append(d => document.createElementNS(d3.ns.prefix.svg, d.node))\n  .each(function(d) {\n    const {styles, attrs, text} = d;\n    const node = d3.select(this).attr(attrs).node()\n    node.setAttribute(\n      'style', mapObject(styles, (v,k)=> `${k}: ${v};`).join(' ')\n    )\n    if(d.text) {\n      node.innerHTML = text\n    }\n  })\n\nlegends.append('text').attr('x', 20)\n        .attr('y', '5')\n        .text(d => d.description)\n        .style('cursor', 'pointer')\n\nfunction toggleLegend() {\n  this.showLegend = (this.showLegend === undefined) ? false : !this.showLegend;\n  background.transition().duration(500)\n    .attr('height', this.showLegend ? '300' : '60')\n\n  legends.transition().duration(300)\n    .style('stroke-opacity', this.showLegend ? '1' : '0')\n    .style('fill-opacity', this.showLegend ? '1' : '0')\n}\n\nconst legendGNode = legendWrapper.node()\nlegendGNode.addEventListener('click', toggleLegend);\n\nexport const all = legendWrapper\n\nexport default legendWrapper\n","// import './external/d3Modded';\n\n// import hotkey from './hotkey';\nimport StateNode from './StateNode/StateNode.js';\nimport CONFIG from './config'\nimport svg from './svg'\nimport * as legend from './legend'\n\nconst tryUncastrate = (obj, castrationLevel) => {\n  if (obj.limboedChildren.length && !(obj.children && obj.children.length) ) {\n    obj.children = obj.limboedChildren;\n    obj.limboedChildren = []\n  }\n}\n\nconst tryCastrate = (obj, castrationLevel) => {\n  const {children, level} = obj\n  if (!children) {\n    return children\n  }\n  else if (level >= castrationLevel) {\n    obj.limboedChildren = obj.children\n    obj.children = []\n    return obj\n  }\n  else if (level < castrationLevel) {\n    obj.children.map(lc => tryUncastrate(lc, castrationLevel))\n  }\n\n  obj.children.map(child =>\n    tryCastrate(child, castrationLevel)\n  )\n  return obj\n}\n\nclass Graph {\n  constructor ({ metadata, substatesPath, cfg = {}, controlPanel }) {\n    window.graph = this;\n    this.svg = svg; // for debug purpose\n    this.rootPath = substatesPath\n    this.controlPanel = controlPanel\n\n    this.cfg = Object.assign({}, CONFIG, cfg);\n    this.isPending = true;\n    this.root = this.metadata = Graph.metadataStore.root = metadata;\n    this.treeLayout = d3.layout.tree().size([this.cfg.contentHeight, this.cfg.contentWidth]);\n  }\n\n  // unimplemented\n  _$adjustHeight() {\n    d3.select(self.frameElement).style(\"height\", this.cfg.height);\n  }\n\n  // change activeStates\n  changeActive(activeness) {\n    this.stateNodes.changeActive(activeness)\n    // this.stateNodes.toggleCollapse()\n    // this.stateNodes.render();\n    // this.stateNodes.toggleCollapse()\n    // this.stateNodes.tryExpand()\n    this.stateNodes.tryCollapse()\n    this.stateNodes.render();\n  }\n\n  // builds out the tree\n  buildTree() {\n    this.setBusy(true); // doesn't trigger immediately, create a jsbin for this\n    setTimeout(()=> {\n      svg.cleanup()\n\n      // this.castrateData()\n      this.stateNodes = new StateNode(\n        Object.assign({\n          cfg: this.cfg, svg: this.svg, graph: this,\n          metadata: this.metadata\n        })\n      )\n      this.castrateState()\n      this.stateNodes.render();\n      this.stateNodes.tryCollapse();\n      this.stateNodes.render();\n      this.setBusy(false);\n    }, 0)\n  }\n\n  setBusy(isBusy) {\n    this.svg.node().style.display = isBusy ? 'none' : 'block'\n    this.setBusyCallback(isBusy)\n  }\n  setBusyCallback () { } // noop\n\n  // delete all nodes and links, and calls buildtree with <root> metadataStore\n  reinitiateRoot() {\n    this.metadata = Graph.metadataStore.root\n    this.buildTree()\n  }\n  // TODO: may not need this\n  // castrateData() {\n  //   const {metadata, cfg: { castration }} = this\n  //   const castrationLevel = +castration\n  //   if (isNaN(castrationLevel) || castrationLevel < 2) {\n  //     return this.metadata = metadata\n  //   }\n  //   this.metadata = tryCastrate(metadata, castrationLevel)\n  // }\n\n  castrateState() {\n    var {stateNodes, cfg: {castrationLevel}} = this\n    castrationLevel = +castrationLevel\n    if (isNaN(castrationLevel) || castrationLevel < 1) {\n      castrationLevel = 100; // meaning show all nodes\n    }\n\n    // castrate from this node forward\n    tryCastrate(stateNodes, stateNodes.level + castrationLevel)\n    this.stateNodes.render()\n  }\n\n  // delete all nodes and links, and calls buildtree with <current node> metadataStore\n  branchoffRoot(node) {\n    this.metadata = node.metadata\n    this.buildTree()\n  }\n\n  toggleEvents() {\n    this.cfg.showEvents = !this.cfg.showEvents\n    this.svg.selectAll('.node text.eventName')[0].forEach(n => {\n      n.style.display = this.cfg.showEvents ? 'block' : 'none';\n    })\n  }\n\n  toggleEnterExitHandlers() {\n    this.cfg.showEnterExitHandlers = !this.cfg.showEnterExitHandlers\n      this.svg.selectAll('.enterHandler, .exitHandler')[0].forEach(n => {\n      n.style.display = this.cfg.showEnterExitHandlers ? 'block' : 'none'\n    })\n  }\n\n  // unimplemented\n  exportPath(path) {\n    this.exportPathCallback(path)\n  }\n  exportPathCallback() { } // noop\n}\n\nGraph.metadataStore = { root: null }\n\n// for debugging purpose\nwindow.Graph = Graph\nexport default Graph\n","import serialize from './serialize'\nimport Graph from './Graph'\n\nwindow.statechartGraph = {\n  serialize,\n  Graph\n}\n\nexport default window.statechartGraph\n"],"names":["CONFIG"],"mappings":"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"}